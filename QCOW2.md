## 정의
- Qemu Copy On Wirte
- QEMU에서 만든 [[가상 디스크 이미지]] 포맷 (kvm에서만 지원)
- 표준
	- qcow2
## 역할
- `.qcow2`형식의 파일이 vm의 하드디스크 역할을 수행
## 특징
- 변경된 블록만 저장하는 방식 ([[가상 디스크 이미지#CoW(Copy on Write)|Copy on Write]])
- 스냅샷, 압축, 암호화, [[가상 디스크 이미지#Backing File (부모 이미지)|백킹파일]] 등 기능 지원
### 장점
- 아래와 같은 기술을 통해 용량 절약 가능
	1. 데이터 없는 영역은 저장x
	2. backing file: 부모 이미지에서 읽고 변경분만 저장
	3. 스냅샷
	4. 파일 압축 저장
- 스냅샷 관리 / 복원 가능
### 단점
- [[가상 디스크 이미지#메타데이터|메타데이터]] 관리로 raw 파일 보다 속도 저하 될 수 있음
- 백킹 체인(부모 이미지)가 깊어지면 성능 저하 발생
## 개념(용어)
#### 클러스터
- qcow2 파일 내부에서 데이터를 저장하는 최소 단위 블록
## 동작 방식
1. qcow2 단독 사용 시
	- 일반적인 디스크처럼 동작
2. 외부 스냅샷 / 백킹 파일 사용 시
	- 백킹 파일을 사용하여 저장 시, 변경 된 블록이 새로운 qcow2에 저장 됨
	- 읽을 때는 자식 디스크 -> 원본 디스크 순으로 진행
3. 스냅샷 생성 시
	- 내부 스냅샷 생성 시 qcow2가 변경 내용을 다른 클러스터 영역에 저장 (다른 qcow2 아님)
	- 따라서 스냅샷 생성 전 상태로 복원 가능
## 파일 구조

## 생성 방식


